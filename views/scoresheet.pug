extends layout

block content
  form#newScoresheet(role="form", action="/scoresheet/update", method="post")
    input#author(type="text", name="author", value=user._id, hidden)
    input#id(type="text", name="id", hidden value=fingerprint)
    input#scoresheet_submitted(
      type="text",
      value="0",
      name="scoresheet_submitted",
      hidden
    )
    input#flight_key(type="text", name="flight_key", hidden, value=flightId)
    .container
      .card
        .card-header
          .row
            .col-md
              h4.card-title BJCP Digital Soresheet
              sub.form-text.mb-2.text-subdued Please fill this form to the most comprehensive degree possible.
            .col-md
              .card-deck
                .card.border-dark.mb-3.mx-1
                  .card-header.px-0.py-0
                    p.small.mb-0.text-center Place
                  .card-body.text-dark.px-3.py-1.text-center
                    select#place.form-control(name="place")
                      option(value=-1, selected) Select...
                      option(value=1) 1st
                      option(value=2) 2nd
                      option(value=3) 3rd
                .card.border-dark.mb-3.mx-1
                  .card-header.px-0.py-0
                    p.small.mb-0.text-center MiniBOS
                  .card-body.text-dark.px-0.py-1.text-center
                    .btn-group-toggle(data-toggle="buttons")
                      label.btn.btn-outline-success.btn-sm(
                        class=Boolean(scoresheet ? scoresheet.mini_boss_advanced : false) ? 'active' : ''
                      ) Advance
                        input#mini_boss_advanced(
                          type="checkbox",
                          autocomplete="off",
                          name="mini_boss_advanced"
                        )
                .card.border-dark.mb-3.mx-1
                  .card-header.px-0.py-0
                    p.small.mb-0.text-center Consensus
                  .card-body.text-dark.my-0.px-0.py-0.text-center
                    input#consensus_score.form-control.form-control-lg.text-center.my-0.p-0.ml-auto.mr-auto.remove-internal-padding(
                      type="number",
                      name="consensus_score",
                      value="0",
                      min="0",
                      max="50",
                      style="width:50%;height:90%;line-height:90%;"
                    )
                .card.border-dark.mb-3.mx-1
                  .card-header.px-0.py-0
                    p.small.mb-0.text-center Total Score
                  .card-body.text-dark.px-0.py-1.text-center
                    h4#judge_total.my-0(name="judge_total") 0

            .col-md-auto.mt-auto.mb-auto
              button#submitBtn.btn.btn-primary(
                type="button",
                name="btn",
                onClick="goHome()"
              ) Back to My Flights
          ul#scoresheet-list.nav.nav-tabs.card-header-tabs(role="tablist")
            li.nav-item
              a#information-tab.nav-link.active.px-2(
                data-toggle="tab",
                href="#information",
                role="tab",
                aria-controls="information",
                aria-selected="true"
              ) Information
            li.nav-item
              a#aroma-tab.nav-link.px-2(
                data-toggle="tab",
                href="#aroma",
                role="tab",
                aria-controls="aroma",
                aria-selected="false"
              ) Aroma
            li.nav-item
              a#appearance-tab.nav-link.px-2(
                data-toggle="tab",
                href="#appearance",
                role="tab",
                aria-controls="appearance",
                aria-selected="false"
              ) Appearance
            li.nav-item
              a#flavor-tab.nav-link.px-2(
                data-toggle="tab",
                href="#flavor",
                role="tab",
                aria-controls="flavor",
                aria-selected="false"
              ) Flavor
            li.nav-item
              a#mouthfeel-tab.nav-link.px-2(
                data-toggle="tab",
                href="#mouthfeel",
                role="tab",
                aria-controls="mouthfeel",
                aria-selected="false"
              ) Mouthfeel
            li.nav-item
              a#descriptors-tab.nav-link.px-2(
                data-toggle="tab",
                href="#descriptors",
                role="tab",
                aria-controls="descriptors",
                aria-selected="false"
              ) Descriptors
            li.nav-item
              a#summary-tab.nav-link.px-2(
                data-toggle="tab",
                href="#summary",
                role="tab",
                aria-controls="summary",
                aria-selected="false"
              ) Summary
        .card-body
          .tab-content
            #information.tab-pane.active(
              role="tabpanel",
              name="information",
              aria-labelledby="information-tab"
            )
              .form-group
                h4 Judge Information
                .form-row.py-1
                  .form-group.col-sm-2.col-form-label Judge
                    label(for="judge_name")
                  .form-group.col-sm-4
                    input#judge_name.form-control(
                      type="text",
                      value=user.firstname + ' ' + user.lastname,
                      disabled
                    )
                  .form-group.col-sm-1.col-form-label BJCP ID
                    label(for="bjcp_id")
                  .form-group.col-sm-2
                    input#bjcp_id.form-control(
                      type="text",
                      value=user.bjcp_id,
                      readonly
                    )
                  .form-group.col-sm-1.col-form-label Rank
                    label(for="bjcp_rank")
                  .form-group.col-sm-2
                    input#bjcp_rank.form-control(
                      type="text",
                      value=user.bjcp_rank,
                      readonly
                    )
                .form-row.py-1
                  .form-group.col-sm-2.col-form-label Session Date
                    label(for="session_date")
                  .form-group.col-sm-4
                    input#session_date.form-control(
                      type="date",
                      name="session_date",
                      value=sess_date
                    )
                  .form-group.col-sm-2.col-form-label Session Location
                    label(for="session_location")
                  .form-group.col-sm-4
                    input#session_location.form-control(
                      type="text",
                      name="session_location",
                      value=session_location,
                      disabled
                    )

							.form-group
								h4 Beer Information
								.form-row.py-1
									.form-group.col-sm-2.col-form-label
										label(for="entry_number") Entry Number
									.form-group.col-sm-4
										input#entry_number.form-control.is-invalid.vCheck(
											type="text",
											placeholder="Entry Number",
											name="entry_number",
											maxlength="6"
										)
										small#entry_number_help.form-text.text-muted Enter <span style="font-family: Courier, monospace;">NONE</span> for non-competition judging sessions
										.invalid-feedback Missing or duplicate value.
									.form-group.col-sm-3.col-form-label.text-center.pl-4
										label(for="flight_position") Flight Position
									.form-group.col-sm-1.pr-0
										input#flight_position.form-control(
											type="number",
											name="flight_position",
											min="0",
											value=flight_position
										)
									.form-group.col-sm-1.col-form-label.text-center
										label(for="flight_total") of
									.form-group.col-sm-1.pl-0
										input#flight_total.form-control(
											type="number",
											name="flight_total",
											min="0",
											value=flight_total
										)
							.form-group
								.form-row.py-1
									.form-group.col-sm-2.col-form-label
										label(for="category") BJCP Style
									.form-group.col-sm-2
										select#category.form-control(
											name="category",
											onchange="update_tooltips()"
										)
											option(hidden, disabled, selected, value)
											each val in [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34]
												option= val
									.form-group.col-sm-2
										select#sub.form-control(
											name="sub",
											onchange="update_tooltips()"
										)
											option(hidden, disabled, selected, value)
											each val in ['A','B','C','D','E','F']
												option= val
									.form-group.col
										input#subcategory.form-control(
											type="text",
											name="subcategory",
											placeholder="Subcategory Name (please spell out)"
										)
							.form-group
								.form-row.py-1
									.form-group.col-3.col-form-label
										.form-check
											input#special_ingredients_check.form-check-input(
												type="checkbox",
												name="special_ingredients_check"
											)
											label.form-check-label(for="special_ingredients_check") Special Ingredients
									.form-group.col-9
										input#special_ingredients.form-control(
											type="text",
											name="special_ingredients",
											placeholder="List Special Ingredients"
										)
							.form-group
								.form-row.py-1
									.form-group.col-3.col-form-label
										.form-check
											input#bottle_inspection_check.form-check-input(
												type="checkbox",
												name="bottle_inspection_check"
											)
											label.form-check-label(for="bottle_inspection_check") Bottle Acceptable
									.form-group.col-9
										input#bottle_inspection_comment.form-control(
											type="text",
											name="bottle_inspection_comment",
											placeholder="Bottle Comments",
											data-role="tagsinput"
										)
										.bootstrap-tagsinput.border-0
											.btn.btn-primary.bootstrap-tagsinput-toggler Show Quick Comments
											.quick_comments.d-none
												//- Bottle Caps
												div
													span.badge.badge-primary.mx-1(style='cursor:pointer' data-value='silver-cap' data-category='cap_color') Silver Cap
													span.badge.badge-primary.mx-1(style='cursor:pointer' data-value='gold-cap' data-category='cap_color') Gold Cap
													span.badge.badge-primary.mx-1(style='cursor:pointer' data-value='black-cap' data-category='cap_color') Black Cap
													span.badge.badge-primary.mx-1(style='cursor:pointer' data-value='white-cap' data-category='cap_color') White Cap
													span.badge.badge-primary.mx-1(style='cursor:pointer' data-value='blue-cap' data-category='cap_color') Blue Cap
													span.badge.badge-primary.mx-1(style='cursor:pointer' data-value='red-cap' data-category='cap_color') Red cap
													span.badge.badge-primary.mx-1(style='cursor:pointer' data-value='green-cap' data-category='cap_color') Green Cap
													span.badge.badge-primary.mx-1(style='cursor:pointer' data-value='other-cap' data-category='cap_color') Other Cap
												//- Bottle Fill
												div
													span.badge.badge-danger.badge-important.mx-1(style='cursor:pointer' data-value='veryhigh-fill' data-category='bottle_fill') Very High Fill
													span.badge.badge-danger.badge-important.mx-1(style='cursor:pointer' data-value='high-fill' data-category='bottle_fill') High Fill
													span.badge.badge-danger.badge-important.mx-1(style='cursor:pointer' data-value='good-fill' data-category='bottle_fill') Good Fill
													span.badge.badge-danger.badge-important.mx-1(style='cursor:pointer' data-value='low-fill' data-category='bottle_fill') Low Fill
													span.badge.badge-danger.badge-important.mx-1(style='cursor:pointer' data-value='verylow-fill' data-category='bottle_fill') Very Low Fill
												//- Bottle Style
												div
													span.badge.badge-warning.mx-1(style='cursor:pointer' data-value='longneck-style' data-category='bottle_style') Longneck Bottle
													span.badge.badge-warning.mx-1(style='cursor:pointer' data-value='stubby-style' data-category='bottle_style') Stubby Bottle
													span.badge.badge-warning.mx-1(style='cursor:pointer' data-value='belgian-style' data-category='bottle_style') Belgian Bottle
													span.badge.badge-warning.mx-1(style='cursor:pointer' data-value='champagne-style' data-category='bottle_style') Champagne Bottle
													span.badge.badge-warning.mx-1(style='cursor:pointer' data-value='other-style' data-category='bottle_style') Other Bottle

  script(src="/javascripts/scoresheet.js")